<dashboard>
    <label>Dynamic Time Analysis Dashboard</label>
    <fieldset submitButton="false" autoRun="true">
        <input type="time" token="time">
            <label>Time Picker</label>
            <default>
                <earliest>-24h</earliest>
                <latest>now</latest>
            </default>
        </input>

        <input type="hidden" token="span">
            <default>1h</default> <!-- Default span -->
            <change>
                <condition match="'$time.earliest$' >= '-24h@h' AND '$time.latest$' <= 'now'">
                    <set token="span">1h</set>
                </condition>
                <condition match="'$time.earliest$' < '-24h@h' OR '$time.latest$' > 'now'">
                    <set token="span">1d</set>
                </condition>
            </change>
        </input>
    </fieldset>

    <search id="mainSearch">
        <query>
            index="someindex" app_name=someappname MESSAGE="message"
            | dedup SOME_ID
            | bin _time span=$span$
            | stats count by _time, MESSAGE
        </query>
        <option name="refresh.display">progressbar</option>
    </search>

    <!-- Visualization: Time Chart -->
    <chart>
        <title>Message Count Over Time</title>
        <search base="mainSearch">
            <query>| timechart span=$span$ count by MESSAGE</query>
        </search>
        <option name="charting.chart">line</option>
    </chart>
</dashboard>
